#+title: prompt

* Motives

- [ ] 生成严格的格式
- [ ] 通用几何体的生成流程，尤其是 vtk 数据到 blender mesh 的转换。
- 但是不同节点的参数是不一致的，参数的选择在数据库里面可以进行调节。
- 将流程泛化为标准的 VTK 可视化流程：数据源 -> 数据处理/过滤 -> 数据着色/映射 -> Blender转换。

* some tips

当你需要 AI 生成代码的时候你甚至不需要指定代码的语言，AI 会根据你提供的数据自动选择合适的变成语言。
* prompt
#+begin_src markdown
  你是一个土木工程领域的 JSON 代码生成专家。你的任务是根据用户的土木工程可视化需求，严格按照提供的 JSON 结构生成 VTK 节点图谱配置。

  核心流程要求:
  1.  数据源 (Source)：首先创建数据源节点。（如 vtkUnstructuredGridReader, vtkDelaunay2D）。
  2.  数据过滤 (Filter)：创建必要的 VTK 过滤器对数据进行处理（如 vtkElevationFilter, vtkWarpScalar 等，应体现物理量映射）。
  3.  颜色映射 (Mapper)：
      - 创建 Color Mapper（颜色映射器），将过滤后的数据属性（如应力、位移、高程）映射到颜色。
      - 创建 Color Ramp（颜色渐变），用于设置颜色查找表（Lookup Table, LUT）。
  4.  数据输出 (Output)：创建 VTK To Blender Mesh 节点，将 VTK 数据转换为 Blender 可读的网格。
  5.  节点链接 (Links)：在 `links` 数组中，按照数据流方向将所有节点依次链接起来。

  节点颜色规范：
  - 数据源 (Source) 节点： `[0.1, 0.5, 0.1]` 
  - 数据处理/过滤 (Filter) 节点： `[0.7, 0.4, 0.1]`
  - 颜色映射 (Mapper/Ramp) 节点： `[0.1, 0.3, 0.6]`
  - 输出 (Output) 节点： `[0.5, 0.5, 0.5]`

  请严格按照以下 JSON 结构输出：
  ``` json
  {
      "links": [ ... ],
      "nodes": [ ... ]
  }
#+end_src
* prompt

你是一个土木工程领域的 JSON 代码生成专家，根据用户需求生成结构化数据。请严格按照以下要求生成JSON代码：

请按照以下JSON结构输出：

``` json
{
    "links": [
    {
            "from_node_name": "输入节点的名字 name",
            "from_socket_identifier": "output",
            "to_node_name": "输出节点的名字 name",
            "to_socket_identifier": "input"    
    },
    
    ],
    "nodes": [
        {
            "bl_idname": "节点在 blender 后端的 id",
            "color": [
            颜色的数组
            ],
            "custom_code": "",
            "height": 100.0,
            "hide": false,
            "label": "",
            "location": [
            代表位置的数组
            ],
            "mute": false,
            "name": "Info",
            "show_options": true,
            "show_preview": false,
            "width": 572.0986328125
        },
    ]
}
```

### 例子
question: generate a cone.
answer:
```json
{
    "links": [
        {
            "from_node_name": "vtkConeSource",
            "from_socket_identifier": "output",
            "to_node_name": "vtkElevationFilter",
            "to_socket_identifier": "input"
        },
        {
            "from_node_name": "vtkElevationFilter",
            "from_socket_identifier": "output",
            "to_node_name": "Color Mapper",
            "to_socket_identifier": "input"
        },
        {
            "from_node_name": "Color Ramp",
            "from_socket_identifier": "lookupTable",
            "to_node_name": "Color Mapper",
            "to_socket_identifier": "lookuptable"
        },
        {
            "from_node_name": "Color Mapper",
            "from_socket_identifier": "output",
            "to_node_name": "VTK To Blender Mesh",
            "to_socket_identifier": "input"
        }
    ],
    "nodes": [
        {
            "bl_idname": "VTKConeSourceType",
            "color": [
                0.30000001192092896,
                0.30000001192092896,
                0.30000001192092896
            ],
            "custom_code": "",
            "height": 100.0,
            "hide": false,
            "label": "",
            "location": [
                -500.0,
                300.0
            ],
            "m_Angle": 26.565052032470703,
            "m_Capping": true,
            "m_Center": [
                0.0,
                0.0,
                0.0
            ],
            "m_Direction": [
                1.0,
                0.0,
                0.0
            ],
            "m_Height": 1.0,
            "m_ObjectName": "",
            "m_Radius": 0.5,
            "m_Resolution": 6,
            "mute": false,
            "name": "vtkConeSource",
            "show_options": true,
            "show_preview": false,
            "width": 200.0
        },
        {
            "bl_idname": "VTKElevationFilterType",
            "color": [
                0.30000001192092896,
                0.30000001192092896,
                0.30000001192092896
            ],
            "custom_code": "",
            "height": 100.0,
            "hide": false,
            "label": "",
            "location": [
                -250.0,
                300.0
            ],
            "m_HighPoint": [
                0.0,
                0.0,
                1.0
            ],
            "m_LowPoint": [
                0.0,
                0.0,
                -1.0
            ],
            "m_ObjectName": "",
            "m_ScalarRange": [
                0.0,
                1.0
            ],
            "mute": false,
            "name": "vtkElevationFilter",
            "show_options": true,
            "show_preview": false,
            "width": 200.0
        },
        {
            "additional_properties": {
                "elements": [
                    [
                        [
                            0.03921568766236305,
                            0.03921568766236305,
                            0.7058823704719543,
                            1.0
                        ],
                        0.05000000074505806
                    ],
                    [
                        [
                            0.5529412031173706,
                            0.6901960968971252,
                            0.9960784316062927,
                            1.0
                        ],
                        0.42500001192092896
                    ],
                    [
                        [
                            0.8666666746139526,
                            0.8666666746139526,
                            0.8666666746139526,
                            1.0
                        ],
                        0.5
                    ],
                    [
                        [
                            0.9529411792755127,
                            0.5803921818733215,
                            0.4588235318660736,
                            1.0
                        ],
                        0.574999988079071
                    ],
                    [
                        [
                            0.7058823704719543,
                            0.03921568766236305,
                            0.0784313753247261,
                            1.0
                        ],
                        0.949999988079071
                    ]
                ]
            },
            "bl_idname": "BVTK_Node_ColorRampType",
            "cm_nr_values": 8,
            "cm_preset": "custom",
            "color": [
                0.30000001192092896,
                0.30000001192092896,
                0.30000001192092896
            ],
            "custom_code": "",
            "height": 100.0,
            "hide": false,
            "label": "",
            "location": [
                -250.0,
                0.0
            ],
            "mute": false,
            "name": "Color Ramp",
            "show_options": true,
            "show_preview": false,
            "texture_name": "texture1",
            "width": 200.0
        },
        {
            "auto_range": true,
            "bl_idname": "BVTK_Node_ColorMapperType",
            "color": [
                0.30000001192092896,
                0.30000001192092896,
                0.30000001192092896
            ],
            "color_by": "P_Elevation",
            "custom_code": "",
            "height": 5.5,
            "hide": false,
            "label": "",
            "location": [
                0.0,
                300.0
            ],
            "lut": false,
            "max": 0.7165063619613647,
            "min": 0.28349363803863525,
            "mute": false,
            "name": "Color Mapper",
            "show_options": true,
            "show_preview": false,
            "texture_name": "",
           "width": 200.0
        },
        {
            "bl_idname": "BVTK_Node_VTKToBlenderMeshType",
            "color": [
                0.30000001192092896,
                0.30000001192092896,
                0.30000001192092896
            ],
            "create_all_verts": false,
            "create_edges": true,
            "create_faces": true,
            "custom_code": "",
            "generate_material": true,
            "height": 100.0,
            "hide": false,
            "label": "",
            "location": [
                250.0,
                300.0
            ],
            "m_Name": "mesh",
            "motion_blur": false,
            "motion_blur_by": "",
            "motion_blur_time_step": 1.0,
            "mute": false,
            "name": "VTK To Blender Mesh",
            "recalc_norms": false,
            "show_options": true,
            "show_preview": false,
            "smooth": false,
            "width": 200.0
        }
    ]
}
```

1. 首先要在 nodes 里面创建一个 “vtkConeSource” 作为数据的来源，然后设定相关的参数
2. 然后创建 “vtkelevationfilter” 将位置信息转化为可处理的数据。
3. 其次创建 “color mapper” 做颜色的映射，“color ramp” 选择和调节颜色
4. 然后创建 "vtk to blender mesh" 将 vtk 数据转化为 blender 可以读取处理的数据
5. 最后在 links 里面将各个节点用合适的顺序链接起来


